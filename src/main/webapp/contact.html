<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Rental Car Malaysia - Contact Us</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <link href="/css/bootstrap.min.css" rel="stylesheet">    
    <link href="/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/recaptcha.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="/js/html5shiv.js"></script>
      <script src="/js/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container navbar-div-container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="navbar-div">
            <a class="navbar-brand" href="/home.html">
              <img src="/img/rentalcarmalaysia-logo.png"/>
            </a>
          </div>
        </div>
        <div class="navbar-collapse collapse">
          <div style="margin-left: 15px;">
            <ul class="nav navbar-nav">
              <li><a href="/home.html">Home</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Services <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#">Rental Car List</a></li>
                  <li class="divider"></li>
                  <li><a href="#">Transportation</a></li>
                  <li><a href="#">Tour Package</a></li>
                </ul>
              </li>
              <li><a href="/procedure.html">Procedure</a></li>
              <li><a href="/rules.html">Rules</a></li>
              <li class="active"><a href="/contact.html">Contact Us</a></li>
            </ul>
          </div>
        </div><!--/.navbar-collapse -->
      </div>
    </div>
    <div class="container-fluid">
      <div class="row-fluid contact-section-top">
        <div class="span12">
          <div class="section-top">
            <div class="title">
              Get In Touch With Us
            </div>
            <div>
              <p>
                We’d love to hear from you!
              </p> 
              <p>
                Trying hard to get the information you are looking for? 
                Having any doubts or comments, or just simply a suggestion? 
                Please write us via the form underneath and speak up!
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr/>
    <div class="container-fluid">
      <div class="row-fluid contact-section-div">
        <div class="span4">
          <div class="contact-section-col">
            <div class="container-col-title">Send us a message</div>
            <div class="sent-result-div" style="display: none;">
              <div class="sent-result-msg">
                <p></p>
              </div>
              <div class="control-group">
                <div class="controls">
                  <button id="backBtn" type="button" class="btn btn-primary">Back</button>
                </div>
              </div>
            </div>
            <div class="contact-form-div">
              <form id="contactForm" method="post" class="form-horizontal">
                <div class="control-group">
                  <label class="control-label" for="contactName">Name*</label>
                  <div class="controls contact-input-div">
                    <input type="text" id="contactName" name="contactName" class="contact-input" required />
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="contactEmail">Email*</label>
                  <div class="controls contact-input-div">
                    <input type="text" id="contactEmail" name="contactEmail" class="contact-input" required />
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="contactPhone">Phone</label>
                  <div class="controls contact-input-div">
                    <input type="text" id="contactPhone" name="contactPhone" class="contact-input" />
                  </div>
                </div>
                <div class="control-group">
                  <label class="control-label" for="contactMessage">Message*</label>
                  <div class="controls contact-input-div">
                    <textarea rows="3" id="contactMessage" name="contactMessage" class="contact-input" required></textarea>
                  </div>
                </div>
              </form>
              <div class="contact-captcha-widget" style="display:none;">
                <div style="padding-bottom: 10px;">
                  <p>
                    For security purpose, please solve the following captcha:
                  </p>
                </div>
                <div id="recaptcha_widget" style="display:none" class="recaptcha_widget">
                  <div id="recaptcha_image"></div>
                  <div class="recaptcha_only_if_incorrect_sol" style="color:red">Incorrect. Please try again.</div>
                  <div class="recaptcha_input">
                    <label class="recaptcha_only_if_image" for="recaptcha_response_field">Enter the words above:</label>
                    <label class="recaptcha_only_if_audio" for="recaptcha_response_field">Enter the numbers you hear:</label>
                    <input type="text" id="recaptcha_response_field" name="recaptcha_response_field">
                  </div>            
                  <ul class="recaptcha_options">
                    <li>
                      <a href="javascript:Recaptcha.reload()" title="Get another captcha">
                        <i class="icon-refresh">
                          <img id="recaptcha_reload" width="25" height="17" src="/img/refresh.png" alt="Get another captcha" />
                        </i>
                        <span class="captcha_hide">Get another captcha</span>
                      </a>
                    </li>
                    <li class="recaptcha_only_if_image">
                      <a href="javascript:Recaptcha.switch_type('audio')" title="Get an audio captcha">
                        <i class="icon-volume-up">
                          <img id="recaptcha_switch_audio" width="25" height="16" alt="Get an audio captcha" src="/img/audio.png">
                        </i>
                        <span class="captcha_hide">Get an audio captcha</span>
                      </a>
                    </li>
                    <li class="recaptcha_only_if_audio">
                      <a href="javascript:Recaptcha.switch_type('image')" title="Get an image captcha">
                        <i class="icon-picture">
                          <img id="recaptcha_switch_img" width="25" height="16" alt="Get an image captcha" src="/img/text.png">
                        </i>
                        <span class="captcha_hide">Get an image captcha</span>
                      </a>
                    </li>
                    <li>
                      <a href="javascript:Recaptcha.showhelp()" title="Help">
                        <i class="icon-question-sign">
                          <img id="recaptcha_whatsthis" width="25" height="16" src="/img/help.png" alt="Help">
                        </i>
                        <span class="captcha_hide">Help</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <label for="recaptcha_widget" class="contact-error-msg send-err-msg" style="display:none;"></label>
              <div class="control-group send-msg-div">
                <div class="controls">
                  <button id="continueBtn" type="button" class="btn btn-primary">Continue</button>
                </div>
              </div>
              <div class="control-group confirm-div" style="display:none;">
                <div class="controls">
                  <span style="padding: 0 10px 10px 0;">
                    <button id="confirmBtn" type="button" class="btn btn-primary">Confirm</button>
                  </span>
                  <button id="cancelBtn" type="button" class="btn btn-primary">Cancel</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="span3">
          <div class="contact-section-col">
            <div class="container-col-title">Contact us</div>
            <address>
              <strong>SSNiwa Sdn Bhd</strong><br/>
              No 98-2, Jalan Cengal Selatan,<br/>
              Gombak Court, 53300,<br/>
              Setapak, Kuala Lumpur<br/>
              <abbr title="Office">O:</abbr> <strong>(60) 3-40320506</strong><br/>
              <abbr title="Mobile">M:</abbr> <strong>(60) 14-9029687</strong><br/>
              <abbr title="Email">E:</abbr> <a href="mailto:ssniwa@gmail.com">ssniwa@gmail.com</a><br/>
            </address>
          </div>
        </div>
        <div class="span5">
          <div class="contact-section-col">
            <div class="container-col-title">Locate us</div>
            <div id="map-canvas" class="map-div"></div>
          </div>
        </div>
      </div>
    </div>
    <hr/>
    <div class="section">
      <footer>
        <p>Copyright © 2013 Rental Car Malaysia. All rights reserved.</p>
      </footer>
    </div>
    <div id="scroll-to-top"><img src="/img/gototop.png"/></div>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/jquery.validate.min.js"></script>
    <script type="text/javascript" src="/js/jquery.blockUI.js"></script>
    <script type="text/javascript" src="/js/main.js"></script>
  </body>
  <script type="text/javascript">
    function initializeMap() {
      var latlng = new google.maps.LatLng(3.206401,101.709017);
      var mapOptions = {
        zoom: 15,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
      var marker = new google.maps.Marker({
        position: latlng,
        map: map
      });
      google.maps.event.trigger(map, 'resize');
    }
    
    function loadMapScript() {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyA_Mr75O-KkL3lK7H85ylSk18bkJ8hdUtY&sensor=false&callback=initializeMap";
      document.body.appendChild(script);
    }
    
    function showCaptcha(){
      Recaptcha.create("6LdXKugSAAAAACKC49wPP1hDSSkPCGvG7_L-f4u4", "recaptcha_widget", {
                      theme : 'custom',
                      callback: Recaptcha.focus_response_field});
    }
    
    function disableEnableContactForm(enable) {
      jQuery(".contact-input").each(function(){
        if( enable ) {
          jQuery(this).removeAttr("disabled");
        }
        else {
          jQuery(this).attr("disabled", "disabled");
        }
      });
    }
    
    function prePostAction() {
      jQuery("#confirmBtn").attr("disabled", "disabled");
      jQuery("#cancelBtn").hide();
      jQuery.blockUI({ message: '<img src="/img/spinner.gif" /><br/><p>Please wait</p>' });
    }
    
    function postPostAction(validated, result, msg) {
      if( validated ) {
        if( result ) {
          jQuery("div.sent-result-msg p").html(msg).parent().removeClass("sent-result-err-msg");
          jQuery("html, body").animate({ scrollTop: 0 }, "slow");
        }
        else {
          jQuery("div.sent-result-msg p").html(msg).parent().addClass("sent-result-err-msg");
        }
        jQuery(".sent-result-div").show();
        jQuery(".contact-form-div").remove();
      }
      else {
        jQuery(".send-err-msg").html(msg).show();
        jQuery("#recaptcha_response_field").focus();
        jQuery("#confirmBtn").removeAttr("disabled");
        jQuery("#cancelBtn").show();
      }      
      
      // jQuery.unblockUI(); not working in IE, thus use this workaround instead.
      //jQuery.unblockUI();
      jQuery(".blockUI").each(function(){
        //jQuery(this).remove();
        jQuery(this).fadeOut("slow");
      });
    }
    
    jQuery(document).ready(function(){
      jQuery("#contactForm").validate({
        rules: {
          contactPhone: {
            digits: true
          },
          contactEmail: {
            required: true,
            email: true
          }
        },
        errorClass: "contact-error-msg"
      });
      
      jQuery("#recaptcha_response_field").on("input", function(){
        jQuery(".send-err-msg").hide();
      });
            
      jQuery("#continueBtn").click(function(){
        if( jQuery("#contactForm").valid() ) {
          showCaptcha();
          disableEnableContactForm(false);
          jQuery(".contact-captcha-widget").show();
          jQuery(".send-msg-div").hide();
          jQuery(".confirm-div").show();
        }
      });
      
      jQuery("#cancelBtn").click(function(){
        disableEnableContactForm(true);
        jQuery("#contactForm")[0].reset();
        jQuery(".contact-captcha-widget").hide();
        jQuery(".send-err-msg").hide();
        jQuery(".send-msg-div").show();
        jQuery(".confirm-div").hide();
      });
      
      jQuery("#confirmBtn").click(function(){
        var respField = jQuery("#recaptcha_response_field");
        var captchaResp = jQuery(respField).val();
        if( !captchaResp || jQuery.trim(captchaResp) == "" ) {
          jQuery(".send-err-msg").html("Please solve the captcha.").show();
          jQuery(respField).focus();
        }
        else {
          captchaResp = jQuery.trim(captchaResp);
          var captchaChallenge = jQuery("#recaptcha_challenge_field").val();
          var contactName = jQuery("#contactName").val();
          var contactEmail = jQuery("#contactEmail").val();
          var contactPhone = jQuery("#contactPhone").val();
          var contactMessage = jQuery("#contactMessage").val();
          var query = "contactName=" + encodeURIComponent(contactName)
                      + "&contactEmail=" + encodeURIComponent(contactEmail)
                      + "&contactPhone=" + encodeURIComponent(contactPhone)
                      + "&contactMessage=" + encodeURIComponent(contactMessage)
                      + "&captchaResp=" + encodeURIComponent(captchaResp)
                      + "&captchaChall=" + encodeURIComponent(captchaChallenge);
          
          prePostAction();
          
          var unknownErrMsg = "Oops. Something went wrong. Please try again or contact us directly via email.";
          jQuery.ajax({
            url: "/contactus", 
            type: "POST",
            data: query,
            success: function(data){
              var code = data.code;
              if( code && code == "1" ) {
                postPostAction(true, true, "Thank you for your message. We will get back to you as soon as possible.");
              }
              else if( code && code == -2 ) {
                postPostAction(false, false, "Invalid captcha. Please try again or click the reload icon to get another captcha.");
              }
              else {
                postPostAction(true, false, unknownErrMsg);
              }
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
              postPostAction(true, false, unknownErrMsg);
            }
          });
        }
      });
      
      jQuery("#backBtn").click(function(){
        window.location = "/contact.html";
      });
      
      loadMapScript();
    });
  </script>
</html>